<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">

<html lang='en'>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" >
<title>containers.lazyarray - ICE 0.1 API documentation</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body><div id="top">
<div id="header">
<a id="main-heading" href="index.html">ICE 0.1 API documentation</a>
</div>
</div>

<div id="navigation">
<div class="navblock">
<div id="toctop">
<ul><li><a href="../index.html">Documentation home</a></li>
</ul>
</div>
</div>
<div class="navblock">
<ul><li><a href="index.html">Main page</a></li>
<li><a href="color.html">color</a></li>
<li><a href="component.collidablecomponent.html">component.collidablecomponent</a></li>
<li><a href="component.collisionresponsesystem.html">component.collisionresponsesystem</a></li>
<li><a href="component.collisionsystem.html">component.collisionsystem</a></li>
<li><a href="component.controllercomponent.html">component.controllercomponent</a></li>
<li><a href="component.controllersystem.html">component.controllersystem</a></li>
<li><a href="component.deathtimeoutcomponent.html">component.deathtimeoutcomponent</a></li>
<li><a href="component.dumbscriptcomponent.html">component.dumbscriptcomponent</a></li>
<li><a href="component.enginecomponent.html">component.enginecomponent</a></li>
<li><a href="component.enginesystem.html">component.enginesystem</a></li>
<li><a href="component.entitysystem.html">component.entitysystem</a></li>
<li><a href="component.exceptions.html">component.exceptions</a></li>
<li><a href="component.healthcomponent.html">component.healthcomponent</a></li>
<li><a href="component.healthsystem.html">component.healthsystem</a></li>
<li><a href="component.movementconstraintcomponent.html">component.movementconstraintcomponent</a></li>
<li><a href="component.movementconstraintsystem.html">component.movementconstraintsystem</a></li>
<li><a href="component.ondeathcomponent.html">component.ondeathcomponent</a></li>
<li><a href="component.ondeathsystem.html">component.ondeathsystem</a></li>
<li><a href="component.ownercomponent.html">component.ownercomponent</a></li>
<li><a href="component.physicscomponent.html">component.physicscomponent</a></li>
<li><a href="component.physicssystem.html">component.physicssystem</a></li>
<li><a href="component.playercomponent.html">component.playercomponent</a></li>
<li><a href="component.spatialsystem.html">component.spatialsystem</a></li>
<li><a href="component.spawnercomponent.html">component.spawnercomponent</a></li>
<li><a href="component.spawnersystem.html">component.spawnersystem</a></li>
<li><a href="component.statisticscomponent.html">component.statisticscomponent</a></li>
<li><a href="component.system.html">component.system</a></li>
<li><a href="component.timeoutsystem.html">component.timeoutsystem</a></li>
<li><a href="component.visualcomponent.html">component.visualcomponent</a></li>
<li><a href="component.visualsystem.html">component.visualsystem</a></li>
<li><a href="component.volumecomponent.html">component.volumecomponent</a></li>
<li><a href="component.warheadcomponent.html">component.warheadcomponent</a></li>
<li><a href="component.warheadsystem.html">component.warheadsystem</a></li>
<li><a href="component.weaponcomponent.html">component.weaponcomponent</a></li>
<li><a href="component.weaponsystem.html">component.weaponsystem</a></li>
<li><a href="containers.array2d.html">containers.array2d</a></li>
<li><a href="containers.fixedarray.html">containers.fixedarray</a></li>
<li><a href="containers.lazyarray.html">containers.lazyarray</a></li>
<li><a href="containers.segmentedvector.html">containers.segmentedvector</a></li>
<li><a href="containers.vector.html">containers.vector</a></li>
<li><a href="formats.cli.html">formats.cli</a></li>
<li><a href="formats.image.html">formats.image</a></li>
<li><a href="formats.mathparser.html">formats.mathparser</a></li>
<li><a href="formats.png.html">formats.png</a></li>
<li><a href="formats.pngcommon.html">formats.pngcommon</a></li>
<li><a href="formats.pngdecoder.html">formats.pngdecoder</a></li>
<li><a href="formats.pngencoder.html">formats.pngencoder</a></li>
<li><a href="formats.zlib.html">formats.zlib</a></li>
<li><a href="graphdata.html">graphdata</a></li>
<li><a href="gui.guibutton.html">gui.guibutton</a></li>
<li><a href="gui.guielement.html">gui.guielement</a></li>
<li><a href="gui.guilinegraph.html">gui.guilinegraph</a></li>
<li><a href="gui.guimenu.html">gui.guimenu</a></li>
<li><a href="gui.guimousecontrollable.html">gui.guimousecontrollable</a></li>
<li><a href="gui.guistatictext.html">gui.guistatictext</a></li>
<li><a href="ice.html">ice</a></li>
<li><a href="ice.credits.html">ice.credits</a></li>
<li><a href="ice.exceptions.html">ice.exceptions</a></li>
<li><a href="ice.game.html">ice.game</a></li>
<li><a href="ice.graphicseffect.html">ice.graphicseffect</a></li>
<li><a href="ice.hud.html">ice.hud</a></li>
<li><a href="ice.ice.html">ice.ice</a></li>
<li><a href="ice.level.html">ice.level</a></li>
<li><a href="ice.player.html">ice.player</a></li>
<li><a href="image.html">image</a></li>
<li><a href="math.math.html">math.math</a></li>
<li><a href="math.matrix4.html">math.matrix4</a></li>
<li><a href="math.rect.html">math.rect</a></li>
<li><a href="math.vector2.html">math.vector2</a></li>
<li><a href="memory.memory.html">memory.memory</a></li>
<li><a href="memory.memorymonitorable.html">memory.memorymonitorable</a></li>
<li><a href="memprof.memprof.html">memprof.memprof</a></li>
<li><a href="monitor.graphmonitor.html">monitor.graphmonitor</a></li>
<li><a href="monitor.monitorable.html">monitor.monitorable</a></li>
<li><a href="monitor.monitordata.html">monitor.monitordata</a></li>
<li><a href="monitor.monitormanager.html">monitor.monitormanager</a></li>
<li><a href="monitor.submonitor.html">monitor.submonitor</a></li>
<li><a href="platform.key.html">platform.key</a></li>
<li><a href="platform.platform.html">platform.platform</a></li>
<li><a href="platform.sdlplatform.html">platform.sdlplatform</a></li>
<li><a href="time.eventcounter.html">time.eventcounter</a></li>
<li><a href="time.gametime.html">time.gametime</a></li>
<li><a href="time.time.html">time.time</a></li>
<li><a href="time.timer.html">time.timer</a></li>
<li><a href="util.bits.html">util.bits</a></li>
<li><a href="util.factory.html">util.factory</a></li>
<li><a href="util.frameprofiler.html">util.frameprofiler</a></li>
<li><a href="util.intervals.html">util.intervals</a></li>
<li><a href="util.iterable.html">util.iterable</a></li>
<li><a href="util.signal.html">util.signal</a></li>
<li><a href="util.stringctfe.html">util.stringctfe</a></li>
<li><a href="util.traits.html">util.traits</a></li>
<li><a href="util.typeinfo.html">util.typeinfo</a></li>
<li><a href="util.unittests.html">util.unittests</a></li>
<li><a href="util.weaksingleton.html">util.weaksingleton</a></li>
<li><a href="util.yaml.html">util.yaml</a></li>
<li><a href="video.binarytexturepacker.html">video.binarytexturepacker</a></li>
<li><a href="video.font.html">video.font</a></li>
<li><a href="video.fontmanager.html">video.fontmanager</a></li>
<li><a href="video.gldrawmode.html">video.gldrawmode</a></li>
<li><a href="video.glmonitor.html">video.glmonitor</a></li>
<li><a href="video.glrenderer.html">video.glrenderer</a></li>
<li><a href="video.glshader.html">video.glshader</a></li>
<li><a href="video.gltexture.html">video.gltexture</a></li>
<li><a href="video.gltexturebackend.html">video.gltexturebackend</a></li>
<li><a href="video.glvertex.html">video.glvertex</a></li>
<li><a href="video.glvertexbuffer.html">video.glvertexbuffer</a></li>
<li><a href="video.glvideodriver.html">video.glvideodriver</a></li>
<li><a href="video.sdlglvideodriver.html">video.sdlglvideodriver</a></li>
<li><a href="video.shader.html">video.shader</a></li>
<li><a href="video.texture.html">video.texture</a></li>
<li><a href="video.texturepage.html">video.texturepage</a></li>
<li><a href="video.videodriver.html">video.videodriver</a></li>
<li><a href="video.videodrivercontainer.html">video.videodrivercontainer</a></li>
</ul>
</div>
</div>

<div id="content">
<h1>containers.lazyarray</h1>
<!-- Generated by Ddoc from containers/lazyarray.d -->
<p>Array that lazily loads items. Used for resource management.</p>

<dl><dt class="d_decl">struct <a name="LazyArrayIndex_"></a><span class="ddoc_psymbol">LazyArrayIndex_</span>(ID = string);
</dt>
<dd><p>Index to a LazyArray. ID specifies type of resource identifier.
</p>
<p><b>Note:</b><br>
DO NOT change alignment here as it causes a gc bug
       that garbage collects the id_ string even if it's
       still used.</p>

<dl><dt class="d_decl">ID <a name="id_"></a><span class="ddoc_psymbol">id_</span>;
</dt>
<dd><p>Identifier of the resource. This is cleared after the resource is loaded.</p>

</dd>
<dt class="d_decl">uint <a name="index_"></a><span class="ddoc_psymbol">index_</span>;
</dt>
<dd><p>Index of the resource in the LazyArray once loaded (uint.max when not loaded).</p>

</dd>
<dt class="d_decl">const pure nothrow const(ID) <a name="id"></a><span class="ddoc_psymbol">id</span>();
</dt>
<dd><p>Get the resource identitifer.</p>

</dd>
<dt class="d_decl">const pure nothrow bool <a name="loaded"></a><span class="ddoc_psymbol">loaded</span>();
</dt>
<dd><p>Is the resource <a name="loaded"></a><span class="ddoc_psymbol">loaded</span>?</p>

</dd>
<dt class="d_decl">pure nothrow  this(ID <b>id</b>);
</dt>
<dd><p>Construct a LazyArrayIndex_ pointing to resource with specified identifier.</p>

</dd>
<dt class="d_decl">void <a name="index"></a><span class="ddoc_psymbol">index</span>(const uint <b>rhs</b>);
</dt>
<dd><p>Set the <a name="index"></a><span class="ddoc_psymbol">index</span> once the resource is loaded.</p>

</dd>
<dt class="d_decl">pure nothrow ID <a name="idNonConst"></a><span class="ddoc_psymbol">idNonConst</span>();
</dt>
<dd><p>Get the resource identitifer (non-const version).</p>

</dd>
</dl>
</dd>
<dt class="d_decl">alias <a name="LazyArrayIndex"></a><span class="ddoc_psymbol">LazyArrayIndex</span>;
</dt>
<dd><p>Default LazyArrayIndex_ uses string as resource identifier.</p>

</dd>
<dt class="d_decl">struct <a name="LazyArray"></a><span class="ddoc_psymbol">LazyArray</span>(T,ID = string);
</dt>
<dd><p>Array that lazily loads items. Used for resource management.
</p>
<p><a name="LazyArray"></a><span class="ddoc_psymbol">LazyArray</span> uses special indices (<span class="d_inlinecode">LazyArrayIndex_</span>), which contain resource
 identifiers. When we ask for an element from <a name="LazyArray"></a><span class="ddoc_psymbol">LazyArray</span> by indexing with
 this index, it checks if the element is loaded.
<br>

 If it's loaded, it returns a pointer to it.
<br>

 If it's not loaded, it loads and stores it (using a user-provided
 delegate), and returns a pointer to it. If the resource could not be loaded,
 it returns <b>null</b>.
<br>

 The <span class="d_inlinecode">LazyArrayIndex_</span> indices are always updated to point to the loaded
 resource based on the resource ID.
<br>

 <a name="LazyArray"></a><span class="ddoc_psymbol">LazyArray</span> cannot be copied for simplicity of implementation.</p>

<dl><dt class="d_decl">struct <a name="Item"></a><span class="ddoc_psymbol">Item</span>;
</dt>
<dd><p><a name="Item"></a><span class="ddoc_psymbol">Item</span> with a resource ID.</p>

</dd>
<dt class="d_decl">Vector!(Item) <a name="storage_"></a><span class="ddoc_psymbol">storage_</span>;
</dt>
<dd><p>Allocated storage.</p>

</dd>
<dt class="d_decl">bool delegate(ID, out T) <a name="loadData_"></a><span class="ddoc_psymbol">loadData_</span>;
</dt>
<dd><p>Delegate used to load data if it's requested and not loaded yet.</p>

</dd>
<dt class="d_decl">T* <a name="opIndex"></a><span class="ddoc_psymbol">opIndex</span>(ref LazyArrayIndex_!(ID) <b>index</b>);
</dt>
<dd><p>Get the item at specified <b>index</b>, loading it if needed. Returns <b>null</b> on failure.</p>

</dd>
<dt class="d_decl">int <a name="opApply"></a><span class="ddoc_psymbol">opApply</span>(int delegate(ref T) <b>dg</b>);
</dt>
<dd><p>Used by foreach.
</p>
<p>Foreach will iterate over all elements of the array in linear order
 from start to end.</p>

</dd>
<dt class="d_decl">pure nothrow void <a name="loaderDelegate"></a><span class="ddoc_psymbol">loaderDelegate</span>(bool delegate(ID, out T) <b>rhs</b>);
</dt>
<dd><p>Set the delegate used to load elements.
</p>
<p>The delegate must take a resource ID and an output argument to write
 the loaded element to. It must return <b>true</b> if the element was loaded
 successfully and <b>false</b> otherwise.
<br>

 The loader delegate should take the resource ID, load the resource
 based on it and write it to output. It should never throw, although
 it's not forced to be nothrow for practicality reasons.</p>

</dd>
</dl>
</dd>
</dl>

</div>

<div id="copyright">
Copyright &copy; Ferdinand Majerech 2011. |
Page generated by AutoDDoc and <a href="http://www.digitalmars.com/d/2.0/ddoc.html">Ddoc</a>.
</div>

</body>
</html>
