<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">

<html lang='en'>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" >
<title>ice.level - ICE 0.1 API documentation</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body><div id="top">
<div id="header">
<a id="main-heading" href="index.html">ICE 0.1 API documentation</a>
</div>
</div>

<div id="navigation">
<div class="navblock">
<div id="toctop">
<ul><li><a href="../index.html">Documentation home</a></li>
</ul>
</div>
</div>
<div class="navblock">
<ul><li><a href="index.html">Main page</a></li>
<li><a href="color.html">color</a></li>
<li><a href="component.collidablecomponent.html">component.collidablecomponent</a></li>
<li><a href="component.collisionresponsesystem.html">component.collisionresponsesystem</a></li>
<li><a href="component.collisionsystem.html">component.collisionsystem</a></li>
<li><a href="component.controllercomponent.html">component.controllercomponent</a></li>
<li><a href="component.controllersystem.html">component.controllersystem</a></li>
<li><a href="component.deathtimeoutcomponent.html">component.deathtimeoutcomponent</a></li>
<li><a href="component.dumbscriptcomponent.html">component.dumbscriptcomponent</a></li>
<li><a href="component.enginecomponent.html">component.enginecomponent</a></li>
<li><a href="component.enginesystem.html">component.enginesystem</a></li>
<li><a href="component.entitysystem.html">component.entitysystem</a></li>
<li><a href="component.exceptions.html">component.exceptions</a></li>
<li><a href="component.healthcomponent.html">component.healthcomponent</a></li>
<li><a href="component.healthsystem.html">component.healthsystem</a></li>
<li><a href="component.ondeathcomponent.html">component.ondeathcomponent</a></li>
<li><a href="component.ondeathsystem.html">component.ondeathsystem</a></li>
<li><a href="component.ownercomponent.html">component.ownercomponent</a></li>
<li><a href="component.physicscomponent.html">component.physicscomponent</a></li>
<li><a href="component.physicssystem.html">component.physicssystem</a></li>
<li><a href="component.playercomponent.html">component.playercomponent</a></li>
<li><a href="component.spatialsystem.html">component.spatialsystem</a></li>
<li><a href="component.statisticscomponent.html">component.statisticscomponent</a></li>
<li><a href="component.system.html">component.system</a></li>
<li><a href="component.timeoutsystem.html">component.timeoutsystem</a></li>
<li><a href="component.visualcomponent.html">component.visualcomponent</a></li>
<li><a href="component.visualsystem.html">component.visualsystem</a></li>
<li><a href="component.volumecomponent.html">component.volumecomponent</a></li>
<li><a href="component.warheadcomponent.html">component.warheadcomponent</a></li>
<li><a href="component.warheadsystem.html">component.warheadsystem</a></li>
<li><a href="component.weaponcomponent.html">component.weaponcomponent</a></li>
<li><a href="component.weaponsystem.html">component.weaponsystem</a></li>
<li><a href="containers.array2d.html">containers.array2d</a></li>
<li><a href="containers.fixedarray.html">containers.fixedarray</a></li>
<li><a href="containers.lazyarray.html">containers.lazyarray</a></li>
<li><a href="containers.segmentedvector.html">containers.segmentedvector</a></li>
<li><a href="containers.vector.html">containers.vector</a></li>
<li><a href="formats.cli.html">formats.cli</a></li>
<li><a href="formats.image.html">formats.image</a></li>
<li><a href="formats.mathparser.html">formats.mathparser</a></li>
<li><a href="formats.png.html">formats.png</a></li>
<li><a href="formats.pngcommon.html">formats.pngcommon</a></li>
<li><a href="formats.pngdecoder.html">formats.pngdecoder</a></li>
<li><a href="formats.pngencoder.html">formats.pngencoder</a></li>
<li><a href="formats.zlib.html">formats.zlib</a></li>
<li><a href="graphdata.html">graphdata</a></li>
<li><a href="gui.guibutton.html">gui.guibutton</a></li>
<li><a href="gui.guielement.html">gui.guielement</a></li>
<li><a href="gui.guilinegraph.html">gui.guilinegraph</a></li>
<li><a href="gui.guimenu.html">gui.guimenu</a></li>
<li><a href="gui.guimousecontrollable.html">gui.guimousecontrollable</a></li>
<li><a href="gui.guistatictext.html">gui.guistatictext</a></li>
<li><a href="ice.html">ice</a></li>
<li><a href="ice.credits.html">ice.credits</a></li>
<li><a href="ice.exceptions.html">ice.exceptions</a></li>
<li><a href="ice.game.html">ice.game</a></li>
<li><a href="ice.graphicseffect.html">ice.graphicseffect</a></li>
<li><a href="ice.hud.html">ice.hud</a></li>
<li><a href="ice.ice.html">ice.ice</a></li>
<li><a href="ice.level.html">ice.level</a></li>
<li><a href="ice.player.html">ice.player</a></li>
<li><a href="image.html">image</a></li>
<li><a href="math.math.html">math.math</a></li>
<li><a href="math.matrix4.html">math.matrix4</a></li>
<li><a href="math.rect.html">math.rect</a></li>
<li><a href="math.vector2.html">math.vector2</a></li>
<li><a href="memory.memory.html">memory.memory</a></li>
<li><a href="memory.memorymonitorable.html">memory.memorymonitorable</a></li>
<li><a href="memory.pool.html">memory.pool</a></li>
<li><a href="monitor.graphmonitor.html">monitor.graphmonitor</a></li>
<li><a href="monitor.monitorable.html">monitor.monitorable</a></li>
<li><a href="monitor.monitordata.html">monitor.monitordata</a></li>
<li><a href="monitor.monitormanager.html">monitor.monitormanager</a></li>
<li><a href="monitor.submonitor.html">monitor.submonitor</a></li>
<li><a href="physics.contact.html">physics.contact</a></li>
<li><a href="physics.contactdetect.html">physics.contactdetect</a></li>
<li><a href="physics.physicsbody.html">physics.physicsbody</a></li>
<li><a href="physics.physicsengine.html">physics.physicsengine</a></li>
<li><a href="physics.physicsmonitor.html">physics.physicsmonitor</a></li>
<li><a href="platform.key.html">platform.key</a></li>
<li><a href="platform.platform.html">platform.platform</a></li>
<li><a href="platform.sdlplatform.html">platform.sdlplatform</a></li>
<li><a href="scene.actor.html">scene.actor</a></li>
<li><a href="scene.scenemanager.html">scene.scenemanager</a></li>
<li><a href="spatial.gridmonitor.html">spatial.gridmonitor</a></li>
<li><a href="spatial.gridspatialmanager.html">spatial.gridspatialmanager</a></li>
<li><a href="spatial.spatialmanager.html">spatial.spatialmanager</a></li>
<li><a href="spatial.volume.html">spatial.volume</a></li>
<li><a href="spatial.volumeaabbox.html">spatial.volumeaabbox</a></li>
<li><a href="spatial.volumecircle.html">spatial.volumecircle</a></li>
<li><a href="time.eventcounter.html">time.eventcounter</a></li>
<li><a href="time.gametime.html">time.gametime</a></li>
<li><a href="time.time.html">time.time</a></li>
<li><a href="time.timer.html">time.timer</a></li>
<li><a href="util.bits.html">util.bits</a></li>
<li><a href="util.factory.html">util.factory</a></li>
<li><a href="util.iterable.html">util.iterable</a></li>
<li><a href="util.signal.html">util.signal</a></li>
<li><a href="util.stringctfe.html">util.stringctfe</a></li>
<li><a href="util.traits.html">util.traits</a></li>
<li><a href="util.typeinfo.html">util.typeinfo</a></li>
<li><a href="util.weaksingleton.html">util.weaksingleton</a></li>
<li><a href="util.yaml.html">util.yaml</a></li>
<li><a href="video.binarytexturepacker.html">video.binarytexturepacker</a></li>
<li><a href="video.font.html">video.font</a></li>
<li><a href="video.fontmanager.html">video.fontmanager</a></li>
<li><a href="video.gldrawmode.html">video.gldrawmode</a></li>
<li><a href="video.glmonitor.html">video.glmonitor</a></li>
<li><a href="video.glrenderer.html">video.glrenderer</a></li>
<li><a href="video.glshader.html">video.glshader</a></li>
<li><a href="video.gltexture.html">video.gltexture</a></li>
<li><a href="video.gltexturebackend.html">video.gltexturebackend</a></li>
<li><a href="video.glvertex.html">video.glvertex</a></li>
<li><a href="video.glvertexbuffer.html">video.glvertexbuffer</a></li>
<li><a href="video.glvideodriver.html">video.glvideodriver</a></li>
<li><a href="video.sdlglvideodriver.html">video.sdlglvideodriver</a></li>
<li><a href="video.shader.html">video.shader</a></li>
<li><a href="video.texture.html">video.texture</a></li>
<li><a href="video.texturepage.html">video.texturepage</a></li>
<li><a href="video.videodriver.html">video.videodriver</a></li>
<li><a href="video.videodrivercontainer.html">video.videodrivercontainer</a></li>
</ul>
</div>
</div>

<div id="content">
<h1>ice.level</h1>
<!-- Generated by Ddoc from ice/level.d -->
<p>Handles execution of a single game <a name="level"></a><span class="ddoc_psymbol">level</span>.</p>

<dl><dt class="d_decl">class <a name="LevelInitializationFailureException"></a><span class="ddoc_psymbol">LevelInitializationFailureException</span>: object.Exception;
</dt>
<dd><p>Thrown when the level fails to initialize.</p>

</dd>
<dt class="d_decl">abstract class <a name="Level"></a><span class="ddoc_psymbol">Level</span>;
</dt>
<dd><p>Handles execution of a single game level.
</p>
<p>Note that it is expected to explicitly destroy the <a name="Level"></a><span class="ddoc_psymbol">Level</span> using clear()
 once it is not used anymore.</p>

<dl><dt class="d_decl">protected const string <a name="name_"></a><span class="ddoc_psymbol">name_</span>;
</dt>
<dd><p>Name of the level (used for debugging).</p>

</dd>
<dt class="d_decl">protected GameSubsystems <a name="subsystems_"></a><span class="ddoc_psymbol">subsystems_</span>;
</dt>
<dd><p>Provides access to game subsystems (such as EntitySystem, VideoDriver, etc.).</p>

</dd>
<dt class="d_decl">pure nothrow  this(string <b>name</b>, GameSubsystems <b>subsystems</b>);
</dt>
<dd><p>Construct a Level.
</p>
<b>Parameters:</b><div class="pbr"><table class=parms><tr><td valign=top>string <b>name</b></td>
<td valign=top>Name of the level.</td></tr>
<tr><td valign=top>GameSubsystems <b>subsystems</b></td>
<td valign=top>Provides access to game <b>subsystems</b>
                       (e.g. EntitySystem to spawn entities).</td></tr>
</table></div>

</dd>
<dt class="d_decl">bool <a name="update"></a><span class="ddoc_psymbol">update</span>();
</dt>
<dd><p>Update the level state, executing level script.
</p>
<p>This might spawn new enemies, display text, etc.

</p>
<b>Returns:</b><div class="pbr"><b>true</b> if the level is still running, <b>false</b> if the level has been
          finished.</div>

</dd>
</dl>
</dd>
<dt class="d_decl">class <a name="DumbLevel"></a><span class="ddoc_psymbol">DumbLevel</span>: ice.level.Level;
</dt>
<dd><p>Level implementation based on a dumb YAML script.
</p>
<p>A level is composed of definitions of "waves" (groups of enemies
 spawned simultaneously) and of a level script, which specifies when to
 spawn a wave.

</p>
<p><b>Example:</b><br>
<pre class="d_code"> wave wave1:
   spawn:
     - unit: ships/enemy1.yaml
       physics:
           position: [360, 32]
           rotation: 0
     - unit: ships/playership.yaml
       physics:
           position: [440, 64]
           rotation: 0
       dumbScript: dumbscripts/enemy1.yaml

 level:
   !!pairs
   - wait: 2.0
   - wave: wave1
   - wait: 5.0
   - text: Lorem Ipsum  #at top or bottom of screen
   - wait: 5.0
   - text: Level done!
</pre>

 Wave definition:
<br>

 A wave definition starts with a mapping key named <b>wave xxx</b> where xxx is
 the name of the wave. Wave names <b>must not contain spaces</b> .
<br>

 There can be any number of wave definitions, but there must not be two
 wave definitions with identical name.
<br>

 Currently, the wave definition has one section, <b>spawn</b>, which is a
 sequence of units (entities) to be spawned. Each unit is a mapping with one
 required key, <b>unit</b>, which specifies filename of the unit to spawn. The
 unit might contain more keys, which define components to override components
 loaded from the unit definition. This allows, for example, for a particular
 spawned unit to use a different script or weapon.
<br>

 Level script:
<br>

 The level script starts with a mapping key named <b>level</b>, and is composed of
 pairs of instructions and their parameters.
<br>

 Current <a name="DumbLevel"></a><span class="ddoc_psymbol">DumbLevel</span> instructions:

</p>
<p><b>wait:</b><br>
</p>
<p><b>Example:</b><br>
<pre class="d_code"> - wait: 2.0 #Wait 2 seconds
</pre>
 Wait for specified time, in seconds. Must not be negative.
<br>


</p>
<p><b>wave:</b><br>
</p>
<p><b>Example:</b><br>
<pre class="d_code"> - wave: wave1 #Launch wave <span class="d_string">"wave1"</span>
</pre>

 Launch wave defined in wave definition with specified name. The wave must be
 defined.
<br>


</p>
<p><b>text:</b><br>
</p>
<p><b>Example:</b><br>
<pre class="d_code"> - text: Lorem Ipsum #Display specified text
</pre>

 Display specified text on the HUD.
<br>


</p>
<p><b>effect:</b><br>
</p>
<b>Examples:</b><div class="pbr"><pre class="d_code"> #Draws a huge red transparent <span class="d_string">"42"</span> at the center of the screen <span class="d_keyword">for</span> one second.
 - effect text:
     text: 42
     font: <span class="d_keyword">default</span>
     fontSize: 512
     color: rgbaFF000080
     time: 1.0

 #Draws random vertical lines quickly moving vertically through the screen.
 #As time <span class="d_keyword">is</span> not specified, they are drawn until the end of game.
 - effect lines:
     minWidth: 0.6
     maxWidth: 1.0
     minLength: 16.0
     maxLength: 32.0
     verticalScrollingSpeed: 1500.0
     linesPerPixel: 0.000003
     detailLevel: 8
     color: rgbaF8F8ECA0
</pre>

 Draw a graphics effect with specified parameters.
<br>

 Effect to draw is specified after "effect" in the instruction name,
 separated by space.
<br>

 There are two effects to draw: text and lines.
<br>

 "text" draws a text in the center of the screen.

</div>
<b>Parameters:</b><div class="pbr"><table class=parms><tr><td valign=top>text</td>
<td valign=top>Text to draw. This must be specified - there is no default.</td></tr>
<tr><td valign=top>font</td>
<td valign=top>Font to use. "default" is the default font. Default: "default"</td></tr>
<tr><td valign=top>fontSize</td>
<td valign=top>Size of the font. Default: 28</td></tr>
<tr><td valign=top>color</td>
<td valign=top>Text color. Default: rgbaFFFFFFFF.</td></tr>
<tr><td valign=top>time</td>
<td valign=top>Time to display the text in seconds. 0 (default) means infinite.
<br>

 "lines" draws random lines on the screen tham might optionally vertically scroll.
<br>

 This is used, for example, for the background scrolling "starfield" effect.</td></tr>
</table></div>
<b>Parameters:</b><div class="pbr"><table class=parms><tr><td valign=top>lineDirection</td>
<td valign=top>Line direction in radians. Default: 0
                     Note that this is not scrolling direction - that is always vertical -
                     it is the direction along which the lines are drawn.</td></tr>
<tr><td valign=top>minWidth</td>
<td valign=top>Minimum line width. Default: 1.0. Must be &gt; 0.</td></tr>
<tr><td valign=top>maxWidth</td>
<td valign=top>Maximum line width. Default: 2.0. Must be &gt; minWidth.</td></tr>
<tr><td valign=top>minLength</td>
<td valign=top>Minimum line length. Default: 1.0. Must be &gt; 0.</td></tr>
<tr><td valign=top>maxLength</td>
<td valign=top>Maximum line length. Default: 10.0. Must be &gt; minLength.</td></tr>
<tr><td valign=top>linesPerPixel</td>
<td valign=top>Average number of lines drawn per "pixel" (1x1 game units)
                     of the screen. Default: 0.001 . Must be &gt;= 0 and &lt;= 1.</td></tr>
<tr><td valign=top>detailLevel</td>
<td valign=top>"Level of detail" of the effect. Higher values are less
                     random, less "detailed" and consume less CPU power.
                     0 is maximum detail. Going below 16 is not advisable
                     (although it might work, if there are few lines).</td></tr>
<tr><td valign=top>color</td>
<td valign=top>Text color. Default: rgbaFFFFFFFF.</td></tr>
<tr><td valign=top>time</td>
<td valign=top>Time to display the text in seconds. 0 (default) means infinite.</td></tr>
<tr><td valign=top>verticalScrollingSpeed</td>
<td valign=top>Vertical scrolling speed of the lines.</td></tr>
</table></div>
<p><b>Default:</b><br>
250.0 . Use negative for opposite direction.</p>

<dl><dt class="d_decl">this(string <b>levelName</b>, Node <b>yaml</b>, GameSubsystems <b>gameSybsystems</b>);
</dt>
<dd><p>Construct a DumbLevel.
</p>
<b>Parameters:</b><div class="pbr"><table class=parms><tr><td valign=top>string <b>levelName</b></td>
<td valign=top>Name of the level (used for debugging).</td></tr>
<tr><td valign=top>Node <b>yaml</b></td>
<td valign=top>YAML source of the level.</td></tr>
<tr><td valign=top>subsystems</td>
<td valign=top>Provides access to game subsystems
                       (e.g. EntitySystem to spawn entities).</td></tr>
</table></div>
<b>Throws:</b><div class="pbr">LevelInitializationFailureException on failure.</div>

</dd>
</dl>
</dd>
</dl>

</div>

<div id="copyright">
Copyright &copy; Ferdinand Majerech 2011. |
Page generated by AutoDDoc and <a href="http://www.digitalmars.com/d/2.0/ddoc.html">Ddoc</a>.
</div>

</body>
</html>
